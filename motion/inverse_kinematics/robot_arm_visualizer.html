<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œë´‡íŒ” ì‹œê°í™”</title>

    <!--
    ========================================
    ë¡œë´‡íŒ” ì‹œê°í™” ì‹œìŠ¤í…œ
    ========================================
    
    ì´ HTML íŒŒì¼ì€ 3ë§í¬ ë¡œë´‡íŒ”ì˜ ë™ì‘ì„
    ì‹¤ì‹œê°„ìœ¼ë¡œ ì‹œê°í™”í•˜ê³  ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ”
    ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.
    
    ì£¼ìš” ê¸°ëŠ¥:
    - ì‹¤ì‹œê°„ ë¡œë´‡íŒ” 3D ì‹œê°í™”
    - ì—­ê¸°êµ¬í•™ ê³„ì‚° ë° ê²€ì¦
    - ê°ë„ë³„ ë™ì‘ ì‹œë®¬ë ˆì´ì…˜
    - ì¢Œí‘œ ê¸°ë°˜ ìœ„ì¹˜ ì œì–´
    
    ì‘ì„±ì: [ì‚¬ìš©ìëª…]
    ë‚ ì§œ: [ì‘ì„±ì¼]
    ========================================
    -->

    <style>
        /*
         * ========================================
         * CSS ìŠ¤íƒ€ì¼ ì •ì˜
         * ========================================
         * 
         * ì „ì²´ í˜ì´ì§€ì˜ ë ˆì´ì•„ì›ƒê³¼ ë””ìì¸ì„ ì •ì˜í•©ë‹ˆë‹¤.
         * ë°˜ì‘í˜• ë””ìì¸ì„ ìœ„í•´ flexboxë¥¼ ì‚¬ìš©í•˜ê³ ,
         * ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
         * ========================================
         */

        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
        }

        /*
         * ë©”ì¸ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼
         * ì „ì²´ ì½˜í…ì¸ ë¥¼ ê°ì‹¸ëŠ” ì¤‘ì•™ ì •ë ¬ëœ ë°•ìŠ¤
         */
        .container {
            max-width: 1200px;
            /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ */
            margin: 0 auto;
            /* ì¤‘ì•™ ì •ë ¬ */
            background: white;
            /* í°ìƒ‰ ë°°ê²½ */
            padding: 20px;
            /* ë‚´ë¶€ ì—¬ë°± */
            border-radius: 10px;
            /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            /* ê·¸ë¦¼ì íš¨ê³¼ */
        }

        /*
         * ë©”ì¸ ì œëª© ìŠ¤íƒ€ì¼
         * í˜ì´ì§€ ìƒë‹¨ì˜ ë¡œë´‡íŒ” ì‹œê°í™” ì œëª©
         */
        h1 {
            color: #333;
            /* ì§„í•œ íšŒìƒ‰ í…ìŠ¤íŠ¸ */
            text-align: center;
            /* ì¤‘ì•™ ì •ë ¬ */
            margin-bottom: 30px;
            /* í•˜ë‹¨ ì—¬ë°± */
        }

        /*
         * ì»¨íŠ¸ë¡¤ íŒ¨ë„ ë ˆì´ì•„ì›ƒ
         * ì…ë ¥ í•„ë“œë“¤ì„ ê°€ë¡œë¡œ ë°°ì¹˜í•˜ëŠ” flexbox ì»¨í…Œì´ë„ˆ
         */
        .controls {
            display: flex;
            /* flexbox ë ˆì´ì•„ì›ƒ */
            gap: 20px;
            /* ìš”ì†Œ ê°„ ê°„ê²© */
            margin-bottom: 20px;
            /* í•˜ë‹¨ ì—¬ë°± */
            flex-wrap: wrap;
            /* í™”ë©´ì´ ì‘ì„ ë•Œ ì¤„ë°”ê¿ˆ */
        }

        /*
         * ê°œë³„ ì»¨íŠ¸ë¡¤ ê·¸ë£¹
         * ê° ì…ë ¥ í•„ë“œì™€ ë¼ë²¨ì„ ê·¸ë£¹í™”
         */
        .control-group {
            flex: 1;
            /* ë™ì¼í•œ ë„ˆë¹„ë¡œ ë¶„ë°° */
            min-width: 200px;
            /* ìµœì†Œ ë„ˆë¹„ ë³´ì¥ */
        }

        /*
         * ì…ë ¥ í•„ë“œ ë¼ë²¨
         * ê° ì…ë ¥ í•„ë“œ ìœ„ì˜ ì„¤ëª… í…ìŠ¤íŠ¸
         */
        label {
            display: block;
            /* ë¸”ë¡ ë ˆë²¨ ìš”ì†Œ */
            margin-bottom: 5px;
            /* í•˜ë‹¨ ì—¬ë°± */
            font-weight: bold;
            /* êµµì€ ê¸€ì”¨ */
            color: #555;
            /* ì¤‘ê°„ íšŒìƒ‰ */
        }

        /*
         * ìˆ«ì ì…ë ¥ í•„ë“œ
         * ê°ë„ì™€ ì¢Œí‘œ ê°’ì„ ì…ë ¥ë°›ëŠ” í…ìŠ¤íŠ¸ ë°•ìŠ¤
         */
        input[type="number"] {
            width: 100%;
            /* ë¶€ëª¨ ìš”ì†Œì˜ ì „ì²´ ë„ˆë¹„ */
            padding: 8px;
            /* ë‚´ë¶€ ì—¬ë°± */
            border: 1px solid #ddd;
            /* í…Œë‘ë¦¬ */
            border-radius: 4px;
            /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            font-size: 16px;
            /* ê¸€ì”¨ í¬ê¸° */
        }

        /*
         * ë²„íŠ¼ ìŠ¤íƒ€ì¼
         * ì‚¬ìš©ì ì•¡ì…˜ì„ íŠ¸ë¦¬ê±°í•˜ëŠ” í´ë¦­ ê°€ëŠ¥í•œ ìš”ì†Œ
         */
        button {
            background: #007bff;
            /* íŒŒë€ìƒ‰ ë°°ê²½ */
            color: white;
            /* í°ìƒ‰ í…ìŠ¤íŠ¸ */
            border: none;
            /* í…Œë‘ë¦¬ ì—†ìŒ */
            padding: 10px 20px;
            /* ë‚´ë¶€ ì—¬ë°± */
            border-radius: 4px;
            /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            cursor: pointer;
            /* ë§ˆìš°ìŠ¤ í¬ì¸í„° */
            font-size: 16px;
            /* ê¸€ì”¨ í¬ê¸° */
            margin: 5px;
            /* ì™¸ë¶€ ì—¬ë°± */
        }

        /*
         * ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼
         * ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œì˜ ì‹œê°ì  í”¼ë“œë°±
         */
        button:hover {
            background: #0056b3;
            /* ë” ì§„í•œ íŒŒë€ìƒ‰ */
        }

        /*
         * ìº”ë²„ìŠ¤ ì»¨í…Œì´ë„ˆ
         * ë¡œë´‡íŒ” ì‹œê°í™”ë¥¼ ìœ„í•œ ìº”ë²„ìŠ¤ ì˜ì—­
         */
        .canvas-container {
            text-align: center;
            /* ì¤‘ì•™ ì •ë ¬ */
            margin: 20px 0;
            /* ìƒí•˜ ì—¬ë°± */
        }

        /*
         * ìº”ë²„ìŠ¤ ìŠ¤íƒ€ì¼
         * ë¡œë´‡íŒ”ì„ ê·¸ë¦¬ëŠ” 2D ê·¸ë˜í”½ ì˜ì—­
         */
        canvas {
            border: 2px solid #333;
            /* ì§„í•œ íšŒìƒ‰ í…Œë‘ë¦¬ */
            background: #f8f9fa;
            /* ì—°í•œ íšŒìƒ‰ ë°°ê²½ */
        }

        /*
         * ì •ë³´ í‘œì‹œ ì˜ì—­
         * ë¡œë´‡íŒ” ì‚¬ì–‘ê³¼ í˜„ì¬ ìƒíƒœë¥¼ ë³´ì—¬ì£¼ëŠ” ë°•ìŠ¤
         */
        .info {
            background: #e9ecef;
            /* ì—°í•œ íšŒìƒ‰ ë°°ê²½ */
            padding: 15px;
            /* ë‚´ë¶€ ì—¬ë°± */
            border-radius: 5px;
            /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            margin: 20px 0;
            /* ìƒí•˜ ì—¬ë°± */
        }

        /*
         * ì¢Œí‘œ ì •ë³´ ë ˆì´ì•„ì›ƒ
         * ì—¬ëŸ¬ ì •ë³´ë¥¼ ê°€ë¡œë¡œ ë°°ì¹˜í•˜ëŠ” flexbox
         */
        .coordinates {
            display: flex;
            /* flexbox ë ˆì´ì•„ì›ƒ */
            gap: 20px;
            /* ìš”ì†Œ ê°„ ê°„ê²© */
            margin-top: 10px;
            /* ìƒë‹¨ ì—¬ë°± */
        }

        /*
         * ê°œë³„ ì¢Œí‘œ ì •ë³´ ë°•ìŠ¤
         * ë§í¬ ê¸¸ì´, ê°ë„, ìœ„ì¹˜ ë“±ì˜ ì •ë³´ë¥¼ í‘œì‹œ
         */
        .coordinate {
            background: #fff;
            /* í°ìƒ‰ ë°°ê²½ */
            padding: 10px;
            /* ë‚´ë¶€ ì—¬ë°± */
            border-radius: 4px;
            /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            border: 1px solid #ddd;
            /* ì—°í•œ íšŒìƒ‰ í…Œë‘ë¦¬ */
        }

        /*
         * ì¢Œí‘œ ì •ë³´ ì œëª©
         * ê° ì •ë³´ ì„¹ì…˜ì˜ ì œëª© (ì˜ˆ: "ë§í¬ ê¸¸ì´", "í˜„ì¬ ê°ë„")
         */
        .coordinate h4 {
            margin: 0 0 5px 0;
            /* í•˜ë‹¨ ì—¬ë°±ë§Œ ì„¤ì • */
            color: #333;
            /* ì§„í•œ íšŒìƒ‰ í…ìŠ¤íŠ¸ */
        }

        /*
         * ì¢Œí‘œ ì •ë³´ ë‚´ìš©
         * ì‹¤ì œ ìˆ˜ì¹˜ ê°’ì„ í‘œì‹œí•˜ëŠ” í…ìŠ¤íŠ¸
         */
        .coordinate p {
            margin: 0;
            /* ì—¬ë°± ì—†ìŒ */
            font-family: monospace;
            /* ê³ ì •í­ í°íŠ¸ (ìˆ«ì ì •ë ¬ìš©) */
            font-size: 14px;
            /* ê¸€ì”¨ í¬ê¸° */
        }
    </style>
</head>

<body>
    <!--
    ========================================
    ë©”ì¸ ì»¨í…Œì´ë„ˆ
    ========================================
    ì „ì²´ í˜ì´ì§€ ì½˜í…ì¸ ë¥¼ ê°ì‹¸ëŠ” ì¤‘ì•™ ì •ë ¬ëœ ë°•ìŠ¤
    -->
    <div class="container">
        <!--
        ë©”ì¸ ì œëª©
        ë¡œë´‡íŒ” ì‹œê°í™” ì‹œìŠ¤í…œì˜ ì œëª©ê³¼ ì´ëª¨ì§€
        -->
        <h1>ğŸ¤– ë¡œë´‡íŒ” ì‹œê°í™” (YZ í‰ë©´)</h1>

        <!--
        ========================================
        ì»¨íŠ¸ë¡¤ íŒ¨ë„
        ========================================
        ì‚¬ìš©ìê°€ ë¡œë´‡íŒ”ì„ ì œì–´í•  ìˆ˜ ìˆëŠ” ì…ë ¥ í•„ë“œë“¤
        ê°ë„ ì œì–´ì™€ ì¢Œí‘œ ì œì–´ ë‘ ê°€ì§€ ë°©ì‹ì„ ì œê³µ
        -->
        <div class="controls">
            <!--
            ì–´ê¹¨ ê´€ì ˆ ê°ë„ ì œì–´
            Theta2ëŠ” ì–´ê¹¨ ê´€ì ˆì˜ pitch ë°©í–¥ íšŒì „ì„ ì œì–´
            -90ë„ ~ +90ë„ ë²”ìœ„ë¡œ ì œí•œ
            -->
            <div class="control-group">
                <label for="theta2">Theta2 (ì–´ê¹¨ ê´€ì ˆ) [ë„]:</label>
                <input type="number" id="theta2" value="0" min="-90" max="90" step="1">
            </div>

            <!--
            íŒ”ê¿ˆì¹˜ ê´€ì ˆ ê°ë„ ì œì–´
            Theta3ëŠ” íŒ”ê¿ˆì¹˜ ê´€ì ˆì˜ pitch ë°©í–¥ íšŒì „ì„ ì œì–´
            -90ë„ ~ +90ë„ ë²”ìœ„ë¡œ ì œí•œ
            -->
            <div class="control-group">
                <label for="theta3">Theta3 (íŒ”ê¿ˆì¹˜ ê´€ì ˆ) [ë„]:</label>
                <input type="number" id="theta3" value="0" min="-90" max="90" step="1">
            </div>

            <!--
            ëª©í‘œ Y ì¢Œí‘œ ì…ë ¥
            ë¡œë´‡íŒ”ì´ ë„ë‹¬í•´ì•¼ í•  Yì¶• ë°©í–¥ ìœ„ì¹˜ (ì „í›„ ë°©í–¥)
            ì–‘ìˆ˜ = ì•ìª½, ìŒìˆ˜ = ë’¤ìª½
            -->
            <div class="control-group">
                <label for="y">ëª©í‘œ Y ì¢Œí‘œ [mm]:</label>
                <input type="number" id="y" value="100" step="10">
            </div>

            <!--
            ëª©í‘œ Z ì¢Œí‘œ ì…ë ¥
            ë¡œë´‡íŒ”ì´ ë„ë‹¬í•´ì•¼ í•  Zì¶• ë°©í–¥ ìœ„ì¹˜ (ìƒí•˜ ë°©í–¥)
            ì–‘ìˆ˜ = ìœ„ìª½, ìŒìˆ˜ = ì•„ë˜ìª½
            -->
            <div class="control-group">
                <label for="z">ëª©í‘œ Z ì¢Œí‘œ [mm]:</label>
                <input type="number" id="z" value="100" step="10">
            </div>
        </div>

        <!--
        ========================================
        ì œì–´ ë²„íŠ¼
        ========================================
        ë¡œë´‡íŒ”ì„ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì œì–´í•  ìˆ˜ ìˆëŠ” ë²„íŠ¼ë“¤
        -->
        <div style="text-align: center;">
            <!--
            ê°ë„ ê¸°ë°˜ ì œì–´ ë²„íŠ¼
            Theta2ì™€ Theta3 ì…ë ¥ í•„ë“œì˜ ê°’ì„ ì‚¬ìš©í•˜ì—¬
            ë¡œë´‡íŒ”ì˜ ê°ë„ë¥¼ ì§ì ‘ ì œì–´
            -->
            <button onclick="updateFromAngles()">ê°ë„ë¡œ ì—…ë°ì´íŠ¸</button>

            <!--
            ì¢Œí‘œ ê¸°ë°˜ ì œì–´ ë²„íŠ¼
            Y, Z ì¢Œí‘œ ì…ë ¥ í•„ë“œì˜ ê°’ì„ ì‚¬ìš©í•˜ì—¬
            ì—­ê¸°êµ¬í•™ìœ¼ë¡œ ê°ë„ë¥¼ ê³„ì‚°í•˜ê³  ë¡œë´‡íŒ” ì œì–´
            -->
            <button onclick="updateFromCoordinates()">ì¢Œí‘œë¡œ ì—…ë°ì´íŠ¸</button>

            <!--
            ì´ˆê¸°í™” ë²„íŠ¼
            ëª¨ë“  ì…ë ¥ í•„ë“œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ë˜ëŒë¦¬ê³ 
            ë¡œë´‡íŒ”ì„ í™ˆ í¬ì§€ì…˜ìœ¼ë¡œ ì´ë™
            -->
            <button onclick="resetPosition()">ì´ˆê¸°í™”</button>
        </div>

        <!--
        ========================================
        ì‹œê°í™” ìº”ë²„ìŠ¤
        ========================================
        ë¡œë´‡íŒ”ì˜ ì‹¤ì‹œê°„ ìƒíƒœë¥¼ 2D ê·¸ë˜í”½ìœ¼ë¡œ í‘œì‹œ
        YZ í‰ë©´ì—ì„œì˜ íˆ¬ì˜ì„ ë³´ì—¬ì¤Œ
        -->
        <div class="canvas-container">
            <!--
            ë¡œë´‡íŒ” ì‹œê°í™”ë¥¼ ìœ„í•œ HTML5 Canvas ìš”ì†Œ
            width: 800px, height: 600pxë¡œ ì„¤ì •
            JavaScriptì—ì„œ ì´ ìº”ë²„ìŠ¤ì— ë¡œë´‡íŒ”ì„ ê·¸ë¦¼
            -->
            <canvas id="robotCanvas" width="800" height="600"></canvas>
        </div>

        <!--
        ========================================
        ë¡œë´‡íŒ” ì •ë³´ í‘œì‹œ
        ========================================
        ë¡œë´‡íŒ”ì˜ ë¬¼ë¦¬ì  ì‚¬ì–‘ê³¼ í˜„ì¬ ìƒíƒœë¥¼
        ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ì—¬ í‘œì‹œ
        -->
        <div class="info">
            <!--
            ì •ë³´ ì„¹ì…˜ ì œëª©
            ë¡œë´‡íŒ”ì˜ ê¸°ë³¸ ì‚¬ì–‘ê³¼ ë™ì  ì •ë³´ë¥¼ êµ¬ë¶„
            -->
            <h3>ë¡œë´‡íŒ” ì‚¬ì–‘</h3>

            <!--
            ì •ë³´ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
            ì—¬ëŸ¬ ì •ë³´ë¥¼ ê°€ë¡œë¡œ ë°°ì¹˜í•˜ì—¬ í•œëˆˆì— ë³¼ ìˆ˜ ìˆê²Œ í•¨
            -->
            <div class="coordinates">
                <!--
                ë§í¬ ê¸¸ì´ ì •ë³´
                ë¡œë´‡íŒ”ì˜ ë¬¼ë¦¬ì  ì¹˜ìˆ˜ë¥¼ í‘œì‹œ
                ì´ ê°’ë“¤ì€ í•˜ë“œì›¨ì–´ ì‚¬ì–‘ê³¼ ì¼ì¹˜í•´ì•¼ í•¨
                -->
                <div class="coordinate">
                    <h4>ë§í¬ ê¸¸ì´</h4>
                    <p>L1 (ë² ì´ìŠ¤): 95mm</p>
                    <p>L2 (ì–´ê¹¨): 123mm</p>
                    <p>L3 (íŒ”ê¿ˆì¹˜): 200mm</p>
                </div>

                <!--
                í˜„ì¬ ê°ë„ ì •ë³´
                ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” í˜„ì¬ ê´€ì ˆ ê°ë„
                JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ê°’ì„ ë³€ê²½
                -->
                <div class="coordinate">
                    <h4>í˜„ì¬ ê°ë„</h4>
                    <p>Theta2: <span id="currentTheta2">0</span>Â°</p>
                    <p>Theta3: <span id="currentTheta3">0</span>Â°</p>
                </div>

                <!--
                ì—”ë“œ ì´í™í„° ìœ„ì¹˜
                ë¡œë´‡íŒ” ëì˜ í˜„ì¬ Y, Z ì¢Œí‘œ
                ì •ê¸°êµ¬í•™ ê³„ì‚° ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ í‘œì‹œ
                -->
                <div class="coordinate">
                    <h4>ì—”ë“œ ì´í™í„° ìœ„ì¹˜</h4>
                    <p>Y: <span id="endY">0</span>mm</p>
                    <p>Z: <span id="endZ">0</span>mm</p>
                </div>

                <!--
                ë„ë‹¬ ê°€ëŠ¥ ê±°ë¦¬
                ë¡œë´‡íŒ”ì´ ë¬¼ë¦¬ì ìœ¼ë¡œ ë„ë‹¬í•  ìˆ˜ ìˆëŠ” ë²”ìœ„
                ìµœì†Œ: |L2-L3|, ìµœëŒ€: L2+L3
                -->
                <div class="coordinate">
                    <h4>ë„ë‹¬ ê±°ë¦¬</h4>
                    <p>ìµœì†Œ: 77mm</p>
                    <p>ìµœëŒ€: 323mm</p>
                </div>
            </div>
        </div>
    </div>

    <!--
    ========================================
    JavaScript ì½”ë“œ
    ========================================
    
    ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¡œë´‡íŒ”ì˜ ì‹œê°í™”ì™€ ì œì–´ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.
    ì£¼ìš” ê¸°ëŠ¥:
    1. ì •ê¸°êµ¬í•™: ê°ë„ â†’ ìœ„ì¹˜ ê³„ì‚°
    2. ì—­ê¸°êµ¬í•™: ìœ„ì¹˜ â†’ ê°ë„ ê³„ì‚°
    3. ì‹¤ì‹œê°„ ì‹œê°í™”: Canvas 2D ê·¸ë˜í”½
    4. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤: ì…ë ¥ ì²˜ë¦¬ ë° ì—…ë°ì´íŠ¸
    
    ìˆ˜í•™ì  ë°°ê²½:
    - 2ë§í¬ ì—­ê¸°êµ¬í•™ (ì–´ê¹¨ + íŒ”ê¿ˆì¹˜)
    - YZ í‰ë©´ì—ì„œì˜ 2D ì‹œë®¬ë ˆì´ì…˜
    - ì‹¤ì‹œê°„ ê°ë„ ë° ìœ„ì¹˜ ê³„ì‚°
    ========================================
    -->
    <script>
        /*
         * ========================================
         * ë¡œë´‡íŒ” ë¬¼ë¦¬ì  ìƒìˆ˜
         * ========================================
         * 
         * ì´ ê°’ë“¤ì€ ì‹¤ì œ í•˜ë“œì›¨ì–´ì˜ ì¹˜ìˆ˜ì™€ ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
         * Arduino ì½”ë“œì˜ L1, L2, L3 ê°’ê³¼ ë™ì¼í•´ì•¼ í•¨.
         * 
         * L1: ë² ì´ìŠ¤ì—ì„œ ì–´ê¹¨ ê´€ì ˆê¹Œì§€ì˜ ë†’ì´
         * L2: ì–´ê¹¨ ê´€ì ˆì—ì„œ íŒ”ê¿ˆì¹˜ ê´€ì ˆê¹Œì§€ì˜ ë§í¬ ê¸¸ì´
         * L3: íŒ”ê¿ˆì¹˜ ê´€ì ˆì—ì„œ ì—”ë“œ ì´í™í„°ê¹Œì§€ì˜ ë§í¬ ê¸¸ì´
         * 
         * ë‹¨ìœ„: ë°€ë¦¬ë¯¸í„° (mm)
         */
        const L1 = 95.0;   // ë² ì´ìŠ¤ â†’ ì–´ê¹¨ ê´€ì ˆ ë†’ì´ (mm)
        const L2 = 123.0;  // ì–´ê¹¨ ê´€ì ˆ â†’ íŒ”ê¿ˆì¹˜ ê´€ì ˆ ë§í¬ ê¸¸ì´ (mm)
        const L3 = 200.0;  // íŒ”ê¿ˆì¹˜ ê´€ì ˆ â†’ ì—”ë“œ ì´í™í„° ë§í¬ ê¸¸ì´ (mm)

        /*
         * ========================================
         * Canvas ê·¸ë˜í”½ ì„¤ì •
         * ========================================
         * 
         * HTML5 Canvasë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œë´‡íŒ”ì„ 2Dë¡œ ì‹œê°í™”
         * 2D ì»¨í…ìŠ¤íŠ¸ë¥¼ í†µí•´ ì„ , ì›, í…ìŠ¤íŠ¸ ë“±ì„ ê·¸ë¦´ ìˆ˜ ìˆìŒ
         */
        const canvas = document.getElementById('robotCanvas');  // Canvas DOM ìš”ì†Œ
        const ctx = canvas.getContext('2d');                   // 2D ê·¸ë˜í”½ ì»¨í…ìŠ¤íŠ¸

        /*
         * ========================================
         * ì¢Œí‘œê³„ ë³€í™˜ ì„¤ì •
         * ========================================
         * 
         * ì‹¤ì œ ë¬¼ë¦¬ì  ì¢Œí‘œ (mm)ë¥¼ Canvas í”½ì…€ ì¢Œí‘œë¡œ ë³€í™˜
         * 
         * scale: 1mm = 2px (í™•ëŒ€ ë¹„ìœ¨)
         * originX: Canvasì˜ Xì¶• ì›ì  (ì¤‘ì•™)
         * originY: Canvasì˜ Yì¶• ì›ì  (í•˜ë‹¨ì—ì„œ 50px ìœ„)
         * 
         * ì£¼ì˜: Canvasì˜ Yì¶•ì€ ìœ„ì—ì„œ ì•„ë˜ë¡œ ì¦ê°€í•˜ë¯€ë¡œ,
         * ì‹¤ì œ ë¬¼ë¦¬ì  Zì¶•ê³¼ëŠ” ë°˜ëŒ€ ë°©í–¥ì…ë‹ˆë‹¤.
         */
        const scale = 2;                    // 1mm = 2px (í™•ëŒ€ ë¹„ìœ¨)
        const originX = canvas.width / 2;   // Xì¶• ì›ì  (Canvas ì¤‘ì•™)
        const originY = canvas.height - 50; // Yì¶• ì›ì  (Canvas í•˜ë‹¨ì—ì„œ 50px ìœ„)

        /*
         * ========================================
         * ì „ì—­ ìƒíƒœ ë³€ìˆ˜
         * ========================================
         * 
         * ë¡œë´‡íŒ”ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì¶”ì í•˜ëŠ” ë³€ìˆ˜ë“¤
         * ê°ë„ëŠ” ë¼ë””ì•ˆ ë‹¨ìœ„ë¡œ ì €ì¥ë˜ë©°,
         * ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì—ì„œëŠ” ë„ ë‹¨ìœ„ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
         */
        let currentTheta2 = 0;  // ì–´ê¹¨ ê´€ì ˆ í˜„ì¬ ê°ë„ (ë¼ë””ì•ˆ)
        let currentTheta3 = 0;  // íŒ”ê¿ˆì¹˜ ê´€ì ˆ í˜„ì¬ ê°ë„ (ë¼ë””ì•ˆ)

        /*
         * ========================================
         * ì‹œìŠ¤í…œ ì´ˆê¸°í™”
         * ========================================
         * 
         * í˜ì´ì§€ ë¡œë“œ ì‹œ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ëŠ” ì´ˆê¸°í™” í•¨ìˆ˜
         * ë¡œë´‡íŒ”ì„ ê¸°ë³¸ í™ˆ í¬ì§€ì…˜ìœ¼ë¡œ ì„¤ì •
         */
        function init() {
            updateFromAngles();  // ê¸°ë³¸ ê°ë„ë¡œ ì´ˆê¸°í™”
        }

        /*
         * ========================================
         * Canvas ì´ˆê¸°í™”
         * ========================================
         * 
         * Canvasë¥¼ ì™„ì „íˆ ì§€ìš°ê³  ê¹¨ë—í•œ ìƒíƒœë¡œ ë§Œë“¦
         * ë§¤ë²ˆ ë¡œë´‡íŒ”ì„ ë‹¤ì‹œ ê·¸ë¦¬ê¸° ì „ì— í˜¸ì¶œ
         */
        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);  // ì „ì²´ Canvas ì˜ì—­ ì§€ìš°ê¸°
        }

        // ê·¸ë¦¬ë“œ ê·¸ë¦¬ê¸°
        function drawGrid() {
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;

            // Yì¶• ê·¸ë¦¬ë“œ (ìˆ˜ì§ì„ )
            for (let y = -200; y <= 200; y += 50) {
                const x = originX + y * scale;
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }

            // Zì¶• ê·¸ë¦¬ë“œ (ìˆ˜í‰ì„ )
            for (let z = 0; z <= 400; z += 50) {
                const y = originY - z * scale;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }

            // ì¶• ê·¸ë¦¬ê¸°
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;

            // Yì¶•
            ctx.beginPath();
            ctx.moveTo(originX, 0);
            ctx.lineTo(originX, canvas.height);
            ctx.stroke();

            // Zì¶•
            ctx.beginPath();
            ctx.moveTo(0, originY);
            ctx.lineTo(canvas.width, originY);
            ctx.stroke();

            // ì¶• ë¼ë²¨
            ctx.fillStyle = '#333';
            ctx.font = '16px Arial';
            ctx.fillText('Y', originX + 10, 20);
            ctx.fillText('Z', canvas.width - 20, originY - 10);
        }

        // ì¢Œí‘œ ë³€í™˜ (ì‹¤ì œ ì¢Œí‘œ â†’ ìº”ë²„ìŠ¤ ì¢Œí‘œ)
        function transformCoordinates(y, z) {
            return {
                x: originX + y * scale,
                y: originY - z * scale
            };
        }

        function forwardKinematics(theta2, theta3) {
            const t2 = theta2 * Math.PI / 180;
            const t3 = theta3 * Math.PI / 180;

            // ë² ì´ìŠ¤ ê¸°ì¤€ ìœ„ì¹˜ (L1 ìœ„ì— shoulder ìˆìŒ)
            const shoulderY = 0;
            const shoulderZ = L1;

            // íŒ”ê¿ˆì¹˜ ìœ„ì¹˜
            const elbowY = shoulderY + L2 * Math.cos(t2);
            const elbowZ = shoulderZ + L2 * Math.sin(t2);

            // ì—”ë“œ ì´í™í„° ìœ„ì¹˜
            const endY = elbowY + L3 * Math.cos(t2 + t3);
            const endZ = elbowZ + L3 * Math.sin(t2 + t3);

            return {
                base: { y: 0, z: 0 },
                shoulder: { y: shoulderY, z: shoulderZ },
                elbow: { y: elbowY, z: elbowZ },
                end: { y: endY, z: endZ }
            };
        }

        function inverseKinematics(y, z) {
            const dy = y;
            const dz = z - L1;

            const rSquared = dy * dy + dz * dz;
            const D = (rSquared - L2 * L2 - L3 * L3) / (2 * L2 * L3);

            if (D < -1 || D > 1) return null; // ë„ë‹¬ ë¶ˆê°€

            const theta3_1 = Math.atan2(Math.sqrt(1 - D * D), D);   // elbow-down
            const theta3_2 = Math.atan2(-Math.sqrt(1 - D * D), D);  // elbow-up

            const theta2_1 = Math.atan2(dz, dy) - Math.atan2(L3 * Math.sin(theta3_1), L2 + L3 * Math.cos(theta3_1));
            const theta2_2 = Math.atan2(dz, dy) - Math.atan2(L3 * Math.sin(theta3_2), L2 + L3 * Math.cos(theta3_2));

            // ë‘˜ ì¤‘ theta2ê°€ ì–‘ìˆ˜ì¸ í•´ ì„ íƒ
            const theta2_deg_1 = theta2_1 * 180 / Math.PI;
            const theta2_deg_2 = theta2_2 * 180 / Math.PI;

            if (theta2_deg_1 > 0) {
                return {
                    theta2: theta2_deg_1,
                    theta3: theta3_1 * 180 / Math.PI
                };
            } else {
                return {
                    theta2: theta2_deg_2,
                    theta3: theta3_2 * 180 / Math.PI
                };
            }
        }







        // ë¡œë´‡íŒ” ê·¸ë¦¬ê¸°
        function drawRobotArm(positions) {
            // ë² ì´ìŠ¤ ê·¸ë¦¬ê¸°
            const base = transformCoordinates(positions.base.y, positions.base.z);
            ctx.fillStyle = '#666';
            ctx.fillRect(base.x - 10, base.y - 10, 20, 20);

            // ì–´ê¹¨ ê´€ì ˆ ê·¸ë¦¬ê¸°
            const shoulder = transformCoordinates(positions.shoulder.y, positions.shoulder.z);
            ctx.fillStyle = '#007bff';
            ctx.beginPath();
            ctx.arc(shoulder.x, shoulder.y, 8, 0, 2 * Math.PI);
            ctx.fill();

            // íŒ”ê¿ˆì¹˜ ê´€ì ˆ ê·¸ë¦¬ê¸°
            const elbow = transformCoordinates(positions.elbow.y, positions.elbow.z);
            ctx.fillStyle = '#28a745';
            ctx.beginPath();
            ctx.arc(elbow.x, elbow.y, 8, 0, 2 * Math.PI);
            ctx.fill();

            // ì—”ë“œ ì´í™í„° ê·¸ë¦¬ê¸°
            const end = transformCoordinates(positions.end.y, positions.end.z);
            ctx.fillStyle = '#dc3545';
            ctx.beginPath();
            ctx.arc(end.x, end.y, 10, 0, 2 * Math.PI);
            ctx.fill();

            // ë§í¬ ê·¸ë¦¬ê¸°
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 4;

            // ë² ì´ìŠ¤ â†’ ì–´ê¹¨
            ctx.beginPath();
            ctx.moveTo(base.x, base.y);
            ctx.lineTo(shoulder.x, shoulder.y);
            ctx.stroke();

            // ì–´ê¹¨ â†’ íŒ”ê¿ˆì¹˜
            ctx.beginPath();
            ctx.moveTo(shoulder.x, shoulder.y);
            ctx.lineTo(elbow.x, elbow.y);
            ctx.stroke();

            // íŒ”ê¿ˆì¹˜ â†’ ì—”ë“œ
            ctx.beginPath();
            ctx.moveTo(elbow.x, elbow.y);
            ctx.lineTo(end.x, end.y);
            ctx.stroke();

            // ì¢Œí‘œ ë¼ë²¨
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText(`(${positions.end.y.toFixed(1)}, ${positions.end.z.toFixed(1)})`, end.x + 15, end.y - 5);
        }

        // ëª©í‘œ ìœ„ì¹˜ í‘œì‹œ
        function drawTarget(y, z) {
            const target = transformCoordinates(y, z);
            ctx.strokeStyle = '#ffc107';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);

            // ì‹­ì í‘œì‹œ
            ctx.beginPath();
            ctx.moveTo(target.x - 15, target.y);
            ctx.lineTo(target.x + 15, target.y);
            ctx.moveTo(target.x, target.y - 15);
            ctx.lineTo(target.x, target.y + 15);
            ctx.stroke();

            ctx.setLineDash([]);

            // ë¼ë²¨
            ctx.fillStyle = '#ffc107';
            ctx.font = '14px Arial';
            ctx.fillText(`ëª©í‘œ: (${y}, ${z})`, target.x + 20, target.y - 10);
        }

        // ê°ë„ë¡œ ì—…ë°ì´íŠ¸
        function updateFromAngles() {
            const theta2 = parseFloat(document.getElementById('theta2').value);
            const theta3 = parseFloat(document.getElementById('theta3').value);

            currentTheta2 = theta2;
            currentTheta3 = theta3;

            const positions = forwardKinematics(theta2, theta3);

            clearCanvas();
            drawGrid();
            drawRobotArm(positions);

            // ì •ë³´ ì—…ë°ì´íŠ¸
            document.getElementById('currentTheta2').textContent = theta2.toFixed(1);
            document.getElementById('currentTheta3').textContent = theta3.toFixed(1);
            document.getElementById('endY').textContent = positions.end.y.toFixed(1);
            document.getElementById('endZ').textContent = positions.end.z.toFixed(1);
        }

        // ì¢Œí‘œë¡œ ì—…ë°ì´íŠ¸
        function updateFromCoordinates() {
            const y = parseFloat(document.getElementById('y').value);
            const z = parseFloat(document.getElementById('z').value);

            const angles = inverseKinematics(y, z);

            if (angles) {
                currentTheta2 = angles.theta2;
                currentTheta3 = angles.theta3;

                document.getElementById('theta2').value = angles.theta2.toFixed(1);
                document.getElementById('theta3').value = angles.theta3.toFixed(1);

                const positions = forwardKinematics(angles.theta2, angles.theta3);

                clearCanvas();
                drawGrid();
                drawRobotArm(positions);
                drawTarget(y, z);

                // ì •ë³´ ì—…ë°ì´íŠ¸
                document.getElementById('currentTheta2').textContent = angles.theta2.toFixed(1);
                document.getElementById('currentTheta3').textContent = angles.theta3.toFixed(1);
                document.getElementById('endY').textContent = positions.end.y.toFixed(1);
                document.getElementById('endZ').textContent = positions.end.z.toFixed(1);
            } else {
                alert('ë„ë‹¬í•  ìˆ˜ ì—†ëŠ” ìœ„ì¹˜ì…ë‹ˆë‹¤!');
            }
        }

        // ì´ˆê¸°í™”
        function resetPosition() {
            document.getElementById('theta2').value = 0;
            document.getElementById('theta3').value = 0;
            document.getElementById('y').value = 100;
            document.getElementById('z').value = 100;
            updateFromAngles();
        }

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Enter') {
                updateFromAngles();
            }
        });

        // ì´ˆê¸° ì‹¤í–‰
        init();
    </script>
</body>

</html>